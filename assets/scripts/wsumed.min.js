function stream_layers(a,b,c){function d(a){for(var c=1/(.1+Math.random()),d=2*Math.random()-.5,e=10/(.1+Math.random()),f=0;b>f;f++){var g=(f/b-d)*e;a[f]+=c*Math.exp(-g*g)}}return arguments.length<3&&(c=0),d3.range(a).map(function(){var a,e=[];for(a=0;b>a;a++)e[a]=c+c*Math.random();for(a=0;5>a;a++)d(e);return e.map(stream_index)})}function stream_waves(a,b){return d3.range(a).map(function(a){return d3.range(b).map(function(c){var d=20*c/b-a/3;return 2*d*Math.exp(-.5*d)}).map(stream_index)})}function stream_index(a,b){return{x:b,y:Math.max(0,a)}}nv.models.axis=function(){"use strict";function a(e){return e.each(function(a){var e=d3.select(this),q=e.selectAll("g.nv-wrap.nv-axis").data([a]),r=q.enter().append("g").attr("class","nvd3 nv-wrap nv-axis"),s=(r.append("g"),q.select("g"));null!==n?b.ticks(n):("top"==b.orient()||"bottom"==b.orient())&&b.ticks(Math.abs(f.range()[1]-f.range()[0])/100),s.transition().call(b),p=p||b.scale();var t=b.tickFormat();null==t&&(t=p.tickFormat());var u=s.selectAll("text.nv-axislabel").data([g||null]);switch(u.exit().remove(),b.orient()){case"top":u.enter().append("text").attr("class","nv-axislabel");var v=2==f.range().length?f.range()[1]:f.range()[f.range().length-1]+(f.range()[1]-f.range()[0]);if(u.attr("text-anchor","middle").attr("y",0).attr("x",v/2),h){var w=q.selectAll("g.nv-axisMaxMin").data(f.domain());w.enter().append("g").attr("class","nv-axisMaxMin").append("text"),w.exit().remove(),w.attr("transform",function(a){return"translate("+f(a)+",0)"}).select("text").attr("dy","-0.5em").attr("y",-b.tickPadding()).attr("text-anchor","middle").text(function(a){var b=t(a);return(""+b).match("NaN")?"":b}),w.transition().attr("transform",function(a,b){return"translate("+f.range()[b]+",0)"})}break;case"bottom":var x=36,y=30,z=s.selectAll("g").select("text");if(j%360){z.each(function(){var a=this.getBBox().width;a>y&&(y=a)});var A=Math.abs(Math.sin(j*Math.PI/180)),x=(A?A*y:y)+30;z.attr("transform",function(){return"rotate("+j+" 0,0)"}).style("text-anchor",j%360>0?"start":"end")}u.enter().append("text").attr("class","nv-axislabel");var v=2==f.range().length?f.range()[1]:f.range()[f.range().length-1]+(f.range()[1]-f.range()[0]);if(u.attr("text-anchor","middle").attr("y",x).attr("x",v/2),h){var w=q.selectAll("g.nv-axisMaxMin").data([f.domain()[0],f.domain()[f.domain().length-1]]);w.enter().append("g").attr("class","nv-axisMaxMin").append("text"),w.exit().remove(),w.attr("transform",function(a){return"translate("+(f(a)+(m?f.rangeBand()/2:0))+",0)"}).select("text").attr("dy",".71em").attr("y",b.tickPadding()).attr("transform",function(){return"rotate("+j+" 0,0)"}).style("text-anchor",j?j%360>0?"start":"end":"middle").text(function(a){var b=t(a);return(""+b).match("NaN")?"":b}),w.transition().attr("transform",function(a){return"translate("+(f(a)+(m?f.rangeBand()/2:0))+",0)"})}l&&z.attr("transform",function(a,b){return"translate(0,"+(b%2==0?"0":"12")+")"});break;case"right":if(u.enter().append("text").attr("class","nv-axislabel"),u.style("text-anchor",k?"middle":"begin").attr("transform",k?"rotate(90)":"").attr("y",k?-Math.max(c.right,d)+12:-10).attr("x",k?f.range()[0]/2:b.tickPadding()),h){var w=q.selectAll("g.nv-axisMaxMin").data(f.domain());w.enter().append("g").attr("class","nv-axisMaxMin").append("text").style("opacity",0),w.exit().remove(),w.attr("transform",function(a){return"translate(0,"+f(a)+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",b.tickPadding()).style("text-anchor","start").text(function(a){var b=t(a);return(""+b).match("NaN")?"":b}),w.transition().attr("transform",function(a,b){return"translate(0,"+f.range()[b]+")"}).select("text").style("opacity",1)}break;case"left":if(u.enter().append("text").attr("class","nv-axislabel"),u.style("text-anchor",k?"middle":"end").attr("transform",k?"rotate(-90)":"").attr("y",k?-Math.max(c.left,d)+o:-10).attr("x",k?-f.range()[0]/2:-b.tickPadding()),h){var w=q.selectAll("g.nv-axisMaxMin").data(f.domain());w.enter().append("g").attr("class","nv-axisMaxMin").append("text").style("opacity",0),w.exit().remove(),w.attr("transform",function(a){return"translate(0,"+p(a)+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",-b.tickPadding()).attr("text-anchor","end").text(function(a){var b=t(a);return(""+b).match("NaN")?"":b}),w.transition().attr("transform",function(a,b){return"translate(0,"+f.range()[b]+")"}).select("text").style("opacity",1)}}if(u.text(function(a){return a}),!h||"left"!==b.orient()&&"right"!==b.orient()||(s.selectAll("g").each(function(a){d3.select(this).select("text").attr("opacity",1),(f(a)<f.range()[1]+10||f(a)>f.range()[0]-10)&&((a>1e-10||-1e-10>a)&&d3.select(this).attr("opacity",0),d3.select(this).select("text").attr("opacity",0))}),f.domain()[0]==f.domain()[1]&&0==f.domain()[0]&&q.selectAll("g.nv-axisMaxMin").style("opacity",function(a,b){return b?0:1})),h&&("top"===b.orient()||"bottom"===b.orient())){var B=[];q.selectAll("g.nv-axisMaxMin").each(function(a,b){try{B.push(b?f(a)-this.getBBox().width-4:f(a)+this.getBBox().width+4)}catch(c){B.push(b?f(a)-4:f(a)+4)}}),s.selectAll("g").each(function(a){(f(a)<B[0]||f(a)>B[1])&&(a>1e-10||-1e-10>a?d3.select(this).remove():d3.select(this).select("text").remove())})}i&&s.selectAll(".tick").filter(function(a){return!parseFloat(Math.round(1e5*a.__data__)/1e6)&&void 0!==a.__data__}).classed("zero",!0),p=f.copy()}),a}var b=d3.svg.axis(),c={top:0,right:0,bottom:0,left:0},d=75,e=60,f=d3.scale.linear(),g=null,h=!0,i=!0,j=0,k=!0,l=!1,m=!1,n=null,o=12;b.scale(f).orient("bottom").tickFormat(function(a){return a});var p;return a.axis=b,d3.rebind(a,b,"orient","tickValues","tickSubdivide","tickSize","tickPadding","tickFormat"),d3.rebind(a,f,"domain","range","rangeBand","rangeBands"),a.options=nv.utils.optionsFunc.bind(a),a.margin=function(b){return arguments.length?(c.top="undefined"!=typeof b.top?b.top:c.top,c.right="undefined"!=typeof b.right?b.right:c.right,c.bottom="undefined"!=typeof b.bottom?b.bottom:c.bottom,c.left="undefined"!=typeof b.left?b.left:c.left,a):c},a.width=function(b){return arguments.length?(d=b,a):d},a.ticks=function(b){return arguments.length?(n=b,a):n},a.height=function(b){return arguments.length?(e=b,a):e},a.axisLabel=function(b){return arguments.length?(g=b,a):g},a.showMaxMin=function(b){return arguments.length?(h=b,a):h},a.highlightZero=function(b){return arguments.length?(i=b,a):i},a.scale=function(c){return arguments.length?(f=c,b.scale(f),m="function"==typeof f.rangeBands,d3.rebind(a,f,"domain","range","rangeBand","rangeBands"),a):f},a.rotateYLabel=function(b){return arguments.length?(k=b,a):k},a.rotateLabels=function(b){return arguments.length?(j=b,a):j},a.staggerLabels=function(b){return arguments.length?(l=b,a):l},a.axisLabelDistance=function(b){return arguments.length?(o=b,a):o},a},nv.models.legend=function(){"use strict";function a(l){return l.each(function(a){var l=c-b.left-b.right,m=d3.select(this),n=m.selectAll("g.nv-legend").data([a]),o=(n.enter().append("g").attr("class","nvd3 nv-legend").append("g"),n.select("g"));n.attr("transform","translate("+b.left+","+b.top+")");var p=o.selectAll(".nv-series").data(function(a){return a}),q=p.enter().append("g").attr("class","nv-series").on("mouseover",function(a,b){k.legendMouseover(a,b)}).on("mouseout",function(a,b){k.legendMouseout(a,b)}).on("click",function(b,c){k.legendClick(b,c),i&&(j?(a.forEach(function(a){a.disabled=!0}),b.disabled=!1):(b.disabled=!b.disabled,a.every(function(a){return a.disabled})&&a.forEach(function(a){a.disabled=!1})),k.stateChange({disabled:a.map(function(a){return!!a.disabled})}))}).on("dblclick",function(b,c){k.legendDblclick(b,c),i&&(a.forEach(function(a){a.disabled=!0}),b.disabled=!1,k.stateChange({disabled:a.map(function(a){return!!a.disabled})}))});if(q.append("circle").style("stroke-width",2).attr("class","nv-legend-symbol").attr("r",5),q.append("text").attr("text-anchor","start").attr("class","nv-legend-text").attr("dy",".32em").attr("dx","8"),p.classed("disabled",function(a){return a.disabled}),p.exit().remove(),p.select("circle").style("fill",function(a,b){return a.color||f(a,b)}).style("stroke",function(a,b){return a.color||f(a,b)}),p.select("text").text(e),g){var r=[];p.each(function(){var a,b=d3.select(this).select("text");try{if(a=b.getComputedTextLength(),0>=a)throw Error()}catch(c){a=nv.utils.calcApproxTextWidth(b)}r.push(a+28)});for(var s=0,t=0,u=[];l>t&&s<r.length;)u[s]=r[s],t+=r[s++];for(0===s&&(s=1);t>l&&s>1;){u=[],s--;for(var v=0;v<r.length;v++)r[v]>(u[v%s]||0)&&(u[v%s]=r[v]);t=u.reduce(function(a,b){return a+b})}for(var w=[],x=0,y=0;s>x;x++)w[x]=y,y+=u[x];p.attr("transform",function(a,b){return"translate("+w[b%s]+","+(5+20*Math.floor(b/s))+")"}),h?o.attr("transform","translate("+(c-b.right-t)+","+b.top+")"):o.attr("transform","translate(0,"+b.top+")"),d=b.top+b.bottom+20*Math.ceil(r.length/s)}else{var z,A=5,B=5,C=0;p.attr("transform",function(){var a=d3.select(this).select("text").node().getComputedTextLength()+28;return z=B,c<b.left+b.right+z+a&&(B=z=5,A+=20),B+=a,B>C&&(C=B),"translate("+z+","+A+")"}),o.attr("transform","translate("+(c-b.right-C)+","+b.top+")"),d=b.top+b.bottom+A+15}}),a}var b={top:5,right:0,bottom:5,left:0},c=400,d=20,e=function(a){return a.key},f=nv.utils.defaultColor(),g=!0,h=!0,i=!0,j=!1,k=d3.dispatch("legendClick","legendDblclick","legendMouseover","legendMouseout","stateChange");return a.dispatch=k,a.options=nv.utils.optionsFunc.bind(a),a.margin=function(c){return arguments.length?(b.top="undefined"!=typeof c.top?c.top:b.top,b.right="undefined"!=typeof c.right?c.right:b.right,b.bottom="undefined"!=typeof c.bottom?c.bottom:b.bottom,b.left="undefined"!=typeof c.left?c.left:b.left,a):b},a.width=function(b){return arguments.length?(c=b,a):c},a.height=function(b){return arguments.length?(d=b,a):d},a.key=function(b){return arguments.length?(e=b,a):e},a.color=function(b){return arguments.length?(f=nv.utils.getColor(b),a):f},a.align=function(b){return arguments.length?(g=b,a):g},a.rightAlign=function(b){return arguments.length?(h=b,a):h},a.updateState=function(b){return arguments.length?(i=b,a):i},a.radioButtonMode=function(b){return arguments.length?(j=b,a):j},a},nv.models.multiBarHorizontal=function(){"use strict";function a(l){return l.each(function(a){{var l=j-i.left-i.right,y=k-i.top-i.bottom;d3.select(this)}t&&(a=d3.layout.stack().offset("zero").values(function(a){return a.values}).y(p)(a)),a.forEach(function(a,b){a.values.forEach(function(a){a.series=b})}),t&&a[0].values.map(function(b,c){var d=0,e=0;a.map(function(a){var b=a.values[c];b.size=Math.abs(b.y),b.y<0?(b.y1=e-b.size,e-=b.size):(b.y1=d,d+=b.size)})});var A=c&&d?[]:a.map(function(a){return a.values.map(function(a,b){return{x:o(a,b),y:p(a,b),y0:a.y0,y1:a.y1}})});m.domain(c||d3.merge(A).map(function(a){return a.x})).rangeBands(e||[0,y],.1),n.domain(d||d3.extent(d3.merge(A).map(function(a){return t?a.y>0?a.y1+a.y:a.y1:a.y}).concat(q))),n.range(u&&!t?f||[n.domain()[0]<0?w:0,l-(n.domain()[1]>0?w:0)]:f||[0,l]),g=g||m,h=h||d3.scale.linear().domain(n.domain()).range([n(0),n(0)]);{var B=d3.select(this).selectAll("g.nv-wrap.nv-multibarHorizontal").data([a]),C=B.enter().append("g").attr("class","nvd3 nv-wrap nv-multibarHorizontal"),D=(C.append("defs"),C.append("g"));B.select("g")}D.append("g").attr("class","nv-groups"),B.attr("transform","translate("+i.left+","+i.top+")");var E=B.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a,b){return b});E.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),E.exit().transition().style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove(),E.attr("class",function(a,b){return"nv-group nv-series-"+b}).classed("hover",function(a){return a.hover}).style("fill",function(a,b){return r(a,b)}).style("stroke",function(a,b){return r(a,b)}),E.transition().style("stroke-opacity",1).style("fill-opacity",.75);var F=E.selectAll("g.nv-bar").data(function(a){return a.values});F.exit().remove();var G=F.enter().append("g").attr("transform",function(b,c,d){return"translate("+h(t?b.y0:0)+","+(t?0:d*m.rangeBand()/a.length+m(o(b,c)))+")"});G.append("rect").attr("width",0).attr("height",m.rangeBand()/(t?1:a.length)),F.on("mouseover",function(b,c){d3.select(this).classed("hover",!0),z.elementMouseover({value:p(b,c),point:b,series:a[b.series],pos:[n(p(b,c)+(t?b.y0:0)),m(o(b,c))+m.rangeBand()*(t?a.length/2:b.series+.5)/a.length],pointIndex:c,seriesIndex:b.series,e:d3.event})}).on("mouseout",function(b,c){d3.select(this).classed("hover",!1),z.elementMouseout({value:p(b,c),point:b,series:a[b.series],pointIndex:c,seriesIndex:b.series,e:d3.event})}).on("click",function(b,c){z.elementClick({value:p(b,c),point:b,series:a[b.series],pos:[m(o(b,c))+m.rangeBand()*(t?a.length/2:b.series+.5)/a.length,n(p(b,c)+(t?b.y0:0))],pointIndex:c,seriesIndex:b.series,e:d3.event}),d3.event.stopPropagation()}).on("dblclick",function(b,c){z.elementDblClick({value:p(b,c),point:b,series:a[b.series],pos:[m(o(b,c))+m.rangeBand()*(t?a.length/2:b.series+.5)/a.length,n(p(b,c)+(t?b.y0:0))],pointIndex:c,seriesIndex:b.series,e:d3.event}),d3.event.stopPropagation()}),G.append("text"),u&&!t?(F.select("text").attr("text-anchor",function(a,b){return p(a,b)<0?"end":"start"}).attr("y",m.rangeBand()/(2*a.length)).attr("dy",".32em").text(function(a,b){return x(p(a,b))}),F.transition().select("text").attr("x",function(a,b){return p(a,b)<0?-4:n(p(a,b))-n(0)+4})):F.selectAll("text").text(""),v&&!t?(G.append("text").classed("nv-bar-label",!0),F.select("text.nv-bar-label").attr("text-anchor",function(a,b){return p(a,b)<0?"start":"end"}).attr("y",m.rangeBand()/(2*a.length)).attr("dy",".32em").text(function(a,b){return o(a,b)}),F.transition().select("text.nv-bar-label").attr("x",function(a,b){return p(a,b)<0?n(0)-n(p(a,b))+4:-4})):F.selectAll("text.nv-bar-label").text(""),F.attr("class",function(a,b){return p(a,b)<0?"nv-bar negative":"nv-bar positive"}),s&&(b||(b=a.map(function(){return!0})),F.style("fill",function(a,c,d){return d3.rgb(s(a,c)).darker(b.map(function(a,b){return b}).filter(function(a,c){return!b[c]})[d]).toString()}).style("stroke",function(a,c,d){return d3.rgb(s(a,c)).darker(b.map(function(a,b){return b}).filter(function(a,c){return!b[c]})[d]).toString()})),t?F.transition().attr("transform",function(a,b){return"translate("+n(a.y1)+","+m(o(a,b))+")"}).select("rect").attr("width",function(a,b){return Math.abs(n(p(a,b)+a.y0)-n(a.y0))}).attr("height",m.rangeBand()):F.transition().attr("transform",function(b,c){return"translate("+n(p(b,c)<0?p(b,c):0)+","+(b.series*m.rangeBand()/a.length+m(o(b,c)))+")"}).select("rect").attr("height",m.rangeBand()/a.length).attr("width",function(a,b){return Math.max(Math.abs(n(p(a,b))-n(0)),1)}),g=m.copy(),h=n.copy()}),a}var b,c,d,e,f,g,h,i={top:0,right:0,bottom:0,left:0},j=960,k=500,l=Math.floor(1e4*Math.random()),m=d3.scale.ordinal(),n=d3.scale.linear(),o=function(a){return a.x},p=function(a){return a.y},q=[0],r=nv.utils.defaultColor(),s=null,t=!1,u=!1,v=!1,w=60,x=d3.format(",.2f"),y=1200,z=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout");return a.dispatch=z,a.options=nv.utils.optionsFunc.bind(a),a.x=function(b){return arguments.length?(o=b,a):o},a.y=function(b){return arguments.length?(p=b,a):p},a.margin=function(b){return arguments.length?(i.top="undefined"!=typeof b.top?b.top:i.top,i.right="undefined"!=typeof b.right?b.right:i.right,i.bottom="undefined"!=typeof b.bottom?b.bottom:i.bottom,i.left="undefined"!=typeof b.left?b.left:i.left,a):i},a.width=function(b){return arguments.length?(j=b,a):j},a.height=function(b){return arguments.length?(k=b,a):k},a.xScale=function(b){return arguments.length?(m=b,a):m},a.yScale=function(b){return arguments.length?(n=b,a):n},a.xDomain=function(b){return arguments.length?(c=b,a):c},a.yDomain=function(b){return arguments.length?(d=b,a):d},a.xRange=function(b){return arguments.length?(e=b,a):e},a.yRange=function(b){return arguments.length?(f=b,a):f},a.forceY=function(b){return arguments.length?(q=b,a):q},a.stacked=function(b){return arguments.length?(t=b,a):t},a.color=function(b){return arguments.length?(r=nv.utils.getColor(b),a):r},a.barColor=function(b){return arguments.length?(s=nv.utils.getColor(b),a):s},a.disabled=function(c){return arguments.length?(b=c,a):b},a.id=function(b){return arguments.length?(l=b,a):l},a.delay=function(b){return arguments.length?(y=b,a):y},a.showValues=function(b){return arguments.length?(u=b,a):u},a.showBarLabels=function(b){return arguments.length?(v=b,a):v},a.valueFormat=function(b){return arguments.length?(x=b,a):x},a.valuePadding=function(b){return arguments.length?(w=b,a):w},a},nv.models.multiBarHorizontalChart=function(){"use strict";function a(q){return q.each(function(q){var s=d3.select(this),A=this,B=(j||parseInt(s.style("width"))||960)-i.left-i.right,C=(k||parseInt(s.style("height"))||400)-i.top-i.bottom;if(a.update=function(){s.transition().duration(y).call(a)},a.container=this,t.disabled=q.map(function(a){return!!a.disabled}),!u){var D;u={};for(D in t)u[D]=t[D]instanceof Array?t[D].slice(0):t[D]}if(!(q&&q.length&&q.filter(function(a){return a.values.length}).length)){var E=s.selectAll(".nv-noData").data([v]);return E.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),E.attr("x",i.left+B/2).attr("y",i.top+C/2).text(function(a){return a}),a}s.selectAll(".nv-noData").remove(),b=d.xScale(),c=d.yScale();var F=s.selectAll("g.nv-wrap.nv-multiBarHorizontalChart").data([q]),G=F.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarHorizontalChart").append("g"),H=F.select("g");if(G.append("g").attr("class","nv-x nv-axis"),G.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line"),G.append("g").attr("class","nv-barsWrap"),G.append("g").attr("class","nv-legendWrap"),G.append("g").attr("class","nv-controlsWrap"),n&&(g.width(B-x()),d.barColor()&&q.forEach(function(a,b){a.color=d3.rgb("#ccc").darker(1.5*b).toString()}),H.select(".nv-legendWrap").datum(q).call(g),i.top!=g.height()&&(i.top=g.height(),C=(k||parseInt(s.style("height"))||400)-i.top-i.bottom),H.select(".nv-legendWrap").attr("transform","translate("+x()+","+-i.top+")")),m){var I=[{key:"Grouped",disabled:d.stacked()},{key:"Stacked",disabled:!d.stacked()}];h.width(x()).color(["#444","#444","#444"]),H.select(".nv-controlsWrap").datum(I).attr("transform","translate(0,"+-i.top+")").call(h)}F.attr("transform","translate("+i.left+","+i.top+")"),d.disabled(q.map(function(a){return a.disabled})).width(B).height(C).color(q.map(function(a,b){return a.color||l(a,b)}).filter(function(a,b){return!q[b].disabled}));var J=H.select(".nv-barsWrap").datum(q.filter(function(a){return!a.disabled}));if(J.transition().call(d),o){e.scale(b).ticks(C/24).tickSize(-B,0),H.select(".nv-x.nv-axis").transition().call(e);var K=H.select(".nv-x.nv-axis").selectAll("g");K.selectAll("line, text")}p&&(f.scale(c).ticks(B/100).tickSize(-C,0),H.select(".nv-y.nv-axis").attr("transform","translate(0,"+C+")"),H.select(".nv-y.nv-axis").transition().call(f)),H.select(".nv-zeroLine line").attr("x1",c(0)).attr("x2",c(0)).attr("y1",0).attr("y2",-C),g.dispatch.on("stateChange",function(b){t=b,w.stateChange(t),a.update()}),h.dispatch.on("legendClick",function(b){if(b.disabled){switch(I=I.map(function(a){return a.disabled=!0,a}),b.disabled=!1,b.key){case"Grouped":d.stacked(!1);break;case"Stacked":d.stacked(!0)}t.stacked=d.stacked(),w.stateChange(t),a.update()}}),w.on("tooltipShow",function(a){r&&z(a,A.parentNode)}),w.on("changeState",function(b){"undefined"!=typeof b.disabled&&(q.forEach(function(a,c){a.disabled=b.disabled[c]}),t.disabled=b.disabled),"undefined"!=typeof b.stacked&&(d.stacked(b.stacked),t.stacked=b.stacked),a.update()})}),a}var b,c,d=nv.models.multiBarHorizontal(),e=nv.models.axis(),f=nv.models.axis(),g=nv.models.legend().height(30),h=nv.models.legend().height(30),i={top:30,right:20,bottom:50,left:60},j=null,k=null,l=nv.utils.defaultColor(),m=!0,n=!0,o=!0,p=!0,q=!1,r=!0,s=function(a,b,c){return"<h3>"+a+" - "+b+"</h3>"+c},t={stacked:q},u=null,v="No Data Available.",w=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),x=function(){return m?180:0},y=250;d.stacked(q),e.orient("left").tickPadding(5).highlightZero(!1).showMaxMin(!1).tickFormat(function(a){return a}),f.orient("bottom").tickFormat(d3.format(",.1f")),h.updateState(!1);var z=function(b,c){var g=b.pos[0]+(c.offsetLeft||0),h=b.pos[1]+(c.offsetTop||0),i=e.tickFormat()(d.x()(b.point,b.pointIndex)),j=f.tickFormat()(d.y()(b.point,b.pointIndex)),k=s(b.series.key,i,j,b,a);nv.tooltip.show([g,h],k,b.value<0?"e":"w",null,c)};return d.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+i.left,a.pos[1]+i.top],w.tooltipShow(a)}),d.dispatch.on("elementMouseout.tooltip",function(a){w.tooltipHide(a)}),w.on("tooltipHide",function(){r&&nv.tooltip.cleanup()}),a.dispatch=w,a.multibar=d,a.legend=g,a.xAxis=e,a.yAxis=f,d3.rebind(a,d,"x","y","xDomain","yDomain","xRange","yRange","forceX","forceY","clipEdge","id","delay","showValues","showBarLabels","valueFormat","stacked","barColor"),a.options=nv.utils.optionsFunc.bind(a),a.margin=function(b){return arguments.length?(i.top="undefined"!=typeof b.top?b.top:i.top,i.right="undefined"!=typeof b.right?b.right:i.right,i.bottom="undefined"!=typeof b.bottom?b.bottom:i.bottom,i.left="undefined"!=typeof b.left?b.left:i.left,a):i},a.width=function(b){return arguments.length?(j=b,a):j},a.height=function(b){return arguments.length?(k=b,a):k},a.color=function(b){return arguments.length?(l=nv.utils.getColor(b),g.color(l),a):l},a.showControls=function(b){return arguments.length?(m=b,a):m},a.showLegend=function(b){return arguments.length?(n=b,a):n},a.showXAxis=function(b){return arguments.length?(o=b,a):o},a.showYAxis=function(b){return arguments.length?(p=b,a):p},a.tooltip=function(b){return arguments.length?(s=b,a):s},a.tooltips=function(b){return arguments.length?(r=b,a):r},a.tooltipContent=function(b){return arguments.length?(s=b,a):s},a.state=function(b){return arguments.length?(t=b,a):t},a.defaultState=function(b){return arguments.length?(u=b,a):u},a.noData=function(b){return arguments.length?(v=b,a):v},a.transitionDuration=function(b){return arguments.length?(y=b,a):y},a},nv.models.pie=function(){"use strict";function a(h){return h.each(function(a){function h(a){a.endAngle=isNaN(a.endAngle)?0:a.endAngle,a.startAngle=isNaN(a.startAngle)?0:a.startAngle,q||(a.innerRadius=0);var b=d3.interpolate(this._current,a);return this._current=b(0),function(a){return E(b(a))}}var k=c-b.left-b.right,w=e-b.top-b.bottom,x=Math.min(k,w)/2,y=x-x/5,z=d3.select(this),A=z.selectAll(".nv-wrap.nv-pie").data(a),B=A.enter().append("g").attr("class","nvd3 nv-wrap nv-pie nv-chart-"+i),C=B.append("g"),D=A.select("g");C.append("g").attr("class","nv-pie"),C.append("g").attr("class","nv-pieLabels"),A.attr("transform","translate("+b.left+","+b.top+")"),D.select(".nv-pie").attr("transform","translate("+k/2+","+w/2+")"),D.select(".nv-pieLabels").attr("transform","translate("+k/2+","+w/2+")"),z.on("click",function(a,b){v.chartClick({data:a,index:b,pos:d3.event,id:i})});var E=d3.svg.arc().outerRadius(y);s&&E.startAngle(s),t&&E.endAngle(t),q&&E.innerRadius(x*u);var F=d3.layout.pie().sort(null).value(function(a){return a.disabled?0:g(a)}),G=A.select(".nv-pie").selectAll(".nv-slice").data(F),H=A.select(".nv-pieLabels").selectAll(".nv-label").data(F);G.exit().remove(),H.exit().remove();var I=G.enter().append("g").attr("class","nv-slice").on("mouseover",function(a,b){d3.select(this).classed("hover",!0),v.elementMouseover({label:f(a.data),value:g(a.data),point:a.data,pointIndex:b,pos:[d3.event.pageX,d3.event.pageY],id:i})}).on("mouseout",function(a,b){d3.select(this).classed("hover",!1),v.elementMouseout({label:f(a.data),value:g(a.data),point:a.data,index:b,id:i})}).on("click",function(a,b){v.elementClick({label:f(a.data),value:g(a.data),point:a.data,index:b,pos:d3.event,id:i}),d3.event.stopPropagation()}).on("dblclick",function(a,b){v.elementDblClick({label:f(a.data),value:g(a.data),point:a.data,index:b,pos:d3.event,id:i}),d3.event.stopPropagation()});G.attr("fill",function(a,b){return j(a,b)}).attr("stroke",function(a,b){return j(a,b)});I.append("path").each(function(a){this._current=a});if(G.select("path").transition().attr("d",E).attrTween("d",h),l){var J=d3.svg.arc().innerRadius(0);m&&(J=E),n&&(J=d3.svg.arc().outerRadius(E.outerRadius())),H.enter().append("g").classed("nv-label",!0).each(function(a){var b=d3.select(this);b.attr("transform",function(a){if(r){a.outerRadius=y+10,a.innerRadius=y+15;var b=(a.startAngle+a.endAngle)/2*(180/Math.PI);return(a.startAngle+a.endAngle)/2<Math.PI?b-=90:b+=90,"translate("+J.centroid(a)+") rotate("+b+")"}return a.outerRadius=x+10,a.innerRadius=x+15,"translate("+J.centroid(a)+")"}),b.append("rect").style("stroke","#fff").style("fill","#fff").attr("rx",3).attr("ry",3),b.append("text").style("text-anchor",r?(a.startAngle+a.endAngle)/2<Math.PI?"start":"end":"middle").style("fill","#000")});var K={},L=14,M=140,N=function(a){return Math.floor(a[0]/M)*M+","+Math.floor(a[1]/L)*L};H.transition().attr("transform",function(a){if(r){a.outerRadius=y+10,a.innerRadius=y+15;var b=(a.startAngle+a.endAngle)/2*(180/Math.PI);return(a.startAngle+a.endAngle)/2<Math.PI?b-=90:b+=90,"translate("+J.centroid(a)+") rotate("+b+")"}a.outerRadius=x+10,a.innerRadius=x+15;var c=J.centroid(a),d=N(c);return K[d]&&(c[1]-=L),K[N(c)]=!0,"translate("+c+")"}),H.select(".nv-label text").style("text-anchor",r?(d.startAngle+d.endAngle)/2<Math.PI?"start":"end":"middle").text(function(a){var b=(a.endAngle-a.startAngle)/(2*Math.PI),c={key:f(a.data),value:g(a.data),percent:d3.format("%")(b)};return a.value&&b>p?c[o]:""})}}),a}var b={top:0,right:0,bottom:0,left:0},c=500,e=500,f=function(a){return a.x},g=function(a){return a.y},h=function(a){return a.description},i=Math.floor(1e4*Math.random()),j=nv.utils.defaultColor(),k=d3.format(",.2f"),l=!0,m=!0,n=!1,o="key",p=.02,q=!1,r=!1,s=!1,t=!1,u=.5,v=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout");return a.dispatch=v,a.options=nv.utils.optionsFunc.bind(a),a.margin=function(c){return arguments.length?(b.top="undefined"!=typeof c.top?c.top:b.top,b.right="undefined"!=typeof c.right?c.right:b.right,b.bottom="undefined"!=typeof c.bottom?c.bottom:b.bottom,b.left="undefined"!=typeof c.left?c.left:b.left,a):b},a.width=function(b){return arguments.length?(c=b,a):c},a.height=function(b){return arguments.length?(e=b,a):e},a.values=function(){return nv.log("pie.values() is no longer supported."),a},a.x=function(b){return arguments.length?(f=b,a):f},a.y=function(b){return arguments.length?(g=d3.functor(b),a):g},a.description=function(b){return arguments.length?(h=b,a):h},a.showLabels=function(b){return arguments.length?(l=b,a):l},a.labelSunbeamLayout=function(b){return arguments.length?(r=b,a):r},a.donutLabelsOutside=function(b){return arguments.length?(n=b,a):n},a.pieLabelsOutside=function(b){return arguments.length?(m=b,a):m},a.labelType=function(b){return arguments.length?(o=b,o=o||"key",a):o},a.donut=function(b){return arguments.length?(q=b,a):q},a.donutRatio=function(b){return arguments.length?(u=b,a):u},a.startAngle=function(b){return arguments.length?(s=b,a):s},a.endAngle=function(b){return arguments.length?(t=b,a):t},a.id=function(b){return arguments.length?(i=b,a):i},a.color=function(b){return arguments.length?(j=nv.utils.getColor(b),a):j},a.valueFormat=function(b){return arguments.length?(k=b,a):k},a.labelThreshold=function(b){return arguments.length?(p=b,a):p},a},nv.models.pieChart=function(){"use strict";function a(h){return h.each(function(h){var i=d3.select(this),j=(e||parseInt(i.style("width"))||960)-d.left-d.right,o=(f||parseInt(i.style("height"))||400)-d.top-d.bottom;if(a.update=function(){i.transition().call(a)},a.container=this,k.disabled=h.map(function(a){return!!a.disabled}),!l){var p;l={};for(p in k)l[p]=k[p]instanceof Array?k[p].slice(0):k[p]}if(!h||!h.length){var q=i.selectAll(".nv-noData").data([m]);return q.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),q.attr("x",d.left+j/2).attr("y",d.top+o/2).text(function(a){return a}),a}i.selectAll(".nv-noData").remove();var r=i.selectAll("g.nv-wrap.nv-pieChart").data([h]),s=r.enter().append("g").attr("class","nvd3 nv-wrap nv-pieChart").append("g"),t=r.select("g");s.append("g").attr("class","nv-pieWrap"),s.append("g").attr("class","nv-legendWrap"),g&&(c.width(j).key(b.x()),r.select(".nv-legendWrap").datum(h).call(c),d.top!=c.height()&&(d.top=c.height(),o=(f||parseInt(i.style("height"))||400)-d.top-d.bottom),r.select(".nv-legendWrap").attr("transform","translate(0,"+-d.top+")")),r.attr("transform","translate("+d.left+","+d.top+")"),b.width(j).height(o);var u=t.select(".nv-pieWrap").datum([h]);d3.transition(u).call(b),c.dispatch.on("stateChange",function(b){k=b,n.stateChange(k),a.update()}),b.dispatch.on("elementMouseout.tooltip",function(a){n.tooltipHide(a)}),n.on("changeState",function(b){"undefined"!=typeof b.disabled&&(h.forEach(function(a,c){a.disabled=b.disabled[c]}),k.disabled=b.disabled),a.update()})}),a}var b=nv.models.pie(),c=nv.models.legend(),d={top:30,right:20,bottom:20,left:20},e=null,f=null,g=!0,h=nv.utils.defaultColor(),i=!0,j=function(a,b){return"<h3>"+a+"</h3><p>"+b+"</p>"},k={},l=null,m="No Data Available.",n=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),o=function(c,d){var e=b.description()(c.point)||b.x()(c.point),f=c.pos[0]+(d&&d.offsetLeft||0),g=c.pos[1]+(d&&d.offsetTop||0),h=b.valueFormat()(b.y()(c.point)),i=j(e,h,c,a);nv.tooltip.show([f,g],i,c.value<0?"n":"s",null,d)};return b.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+d.left,a.pos[1]+d.top],n.tooltipShow(a)}),n.on("tooltipShow",function(a){i&&o(a)}),n.on("tooltipHide",function(){i&&nv.tooltip.cleanup()}),a.legend=c,a.dispatch=n,a.pie=b,d3.rebind(a,b,"valueFormat","values","x","y","description","id","showLabels","donutLabelsOutside","pieLabelsOutside","labelType","donut","donutRatio","labelThreshold"),a.options=nv.utils.optionsFunc.bind(a),a.margin=function(b){return arguments.length?(d.top="undefined"!=typeof b.top?b.top:d.top,d.right="undefined"!=typeof b.right?b.right:d.right,d.bottom="undefined"!=typeof b.bottom?b.bottom:d.bottom,d.left="undefined"!=typeof b.left?b.left:d.left,a):d},a.width=function(b){return arguments.length?(e=b,a):e},a.height=function(b){return arguments.length?(f=b,a):f},a.color=function(d){return arguments.length?(h=nv.utils.getColor(d),c.color(h),b.color(h),a):h},a.showLegend=function(b){return arguments.length?(g=b,a):g},a.tooltips=function(b){return arguments.length?(i=b,a):i},a.tooltipContent=function(b){return arguments.length?(j=b,a):j},a.state=function(b){return arguments.length?(k=b,a):k},a.defaultState=function(b){return arguments.length?(l=b,a):l},a.noData=function(b){return arguments.length?(m=b,a):m},a},function(){"use strict";window.nv.tooltip={},window.nv.models.tooltip=function(){function a(){if(k){var a=d3.select(k);"svg"!==a.node().tagName&&(a=a.select("svg"));var b=a.node()?a.attr("viewBox"):null;if(b){b=b.split(" ");var c=parseInt(a.style("width"))/b[2];m.left=m.left*c,m.top=m.top*c}}}function b(a){var b;b=d3.select(k?k:"body");var c=b.select(".nvtooltip");return null===c.node()&&(c=b.append("div").attr("class","nvtooltip "+(j?j:"xy-tooltip")).attr("id",o)),c.node().innerHTML=a,c.style("top",0).style("left",0).style("opacity",0),c.selectAll("div, table, td, tr").classed(p,!0),c.classed(p,!0),c.node()}function c(){if(n&&t(e)){a();var d=m.left,j=null!=i?i:m.top,o=b(s(e));if(l=o,k){var p=k.getElementsByTagName("svg")[0],q=(p?p.getBoundingClientRect():k.getBoundingClientRect(),{left:0,top:0});if(p){var r=p.getBoundingClientRect(),u=k.getBoundingClientRect(),v=r.top;if(0>v){var w=k.getBoundingClientRect();v=Math.abs(v)>w.height?0:v}q.top=Math.abs(v-u.top),q.left=Math.abs(r.left-u.left)}d+=k.offsetLeft+q.left-2*k.scrollLeft,j+=k.offsetTop+q.top-2*k.scrollTop
}return h&&h>0&&(j=Math.floor(j/h)*h),nv.tooltip.calcTooltipPosition([d,j],f,g,o),c}}var d=null,e=null,f="w",g=50,h=25,i=null,j=null,k=null,l=null,m={left:null,top:null},n=!0,o="nvtooltip-"+Math.floor(1e5*Math.random()),p="nv-pointer-events-none",q=function(a){return a},r=function(a){return a},s=function(a){if(null!=d)return d;if(null==a)return"";var b=d3.select(document.createElement("table")),c=b.selectAll("thead").data([a]).enter().append("thead");c.append("tr").append("td").attr("colspan",3).append("strong").classed("x-value",!0).html(r(a.value));var e=b.selectAll("tbody").data([a]).enter().append("tbody"),f=e.selectAll("tr").data(function(a){return a.series}).enter().append("tr").classed("highlight",function(a){return a.highlight});f.append("td").classed("legend-color-guide",!0).append("div").style("background-color",function(a){return a.color}),f.append("td").classed("key",!0).html(function(a){return a.key}),f.append("td").classed("value",!0).html(function(a,b){return q(a.value,b)}),f.selectAll("td").each(function(a){if(a.highlight){var b=d3.scale.linear().domain([0,1]).range(["#fff",a.color]),c=.6;d3.select(this).style("border-bottom-color",b(c)).style("border-top-color",b(c))}});var g=b.node().outerHTML;return void 0!==a.footer&&(g+="<div class='footer'>"+a.footer+"</div>"),g},t=function(a){return a&&a.series&&a.series.length>0?!0:!1};return c.nvPointerEventsClass=p,c.content=function(a){return arguments.length?(d=a,c):d},c.tooltipElem=function(){return l},c.contentGenerator=function(a){return arguments.length?("function"==typeof a&&(s=a),c):s},c.data=function(a){return arguments.length?(e=a,c):e},c.gravity=function(a){return arguments.length?(f=a,c):f},c.distance=function(a){return arguments.length?(g=a,c):g},c.snapDistance=function(a){return arguments.length?(h=a,c):h},c.classes=function(a){return arguments.length?(j=a,c):j},c.chartContainer=function(a){return arguments.length?(k=a,c):k},c.position=function(a){return arguments.length?(m.left="undefined"!=typeof a.left?a.left:m.left,m.top="undefined"!=typeof a.top?a.top:m.top,c):m},c.fixedTop=function(a){return arguments.length?(i=a,c):i},c.enabled=function(a){return arguments.length?(n=a,c):n},c.valueFormatter=function(a){return arguments.length?("function"==typeof a&&(q=a),c):q},c.headerFormatter=function(a){return arguments.length?("function"==typeof a&&(r=a),c):r},c.id=function(){return o},c},nv.tooltip.show=function(a,b,c,d,e,f){var g=document.createElement("div");g.className="nvtooltip "+(f?f:"xy-tooltip");var h=e;(!e||e.tagName.match(/g|svg/i))&&(h=document.getElementsByTagName("body")[0]),g.style.left=0,g.style.top=0,g.style.opacity=0,g.innerHTML=b,h.appendChild(g),e&&(a[0]=a[0]-e.scrollLeft,a[1]=a[1]-e.scrollTop),nv.tooltip.calcTooltipPosition(a,c,d,g)},nv.tooltip.findFirstNonSVGParent=function(a){for(;null!==a.tagName.match(/^g|svg$/i);)a=a.parentNode;return a},nv.tooltip.findTotalOffsetTop=function(a,b){var c=b;do isNaN(a.offsetTop)||(c+=a.offsetTop);while(a=a.offsetParent);return c},nv.tooltip.findTotalOffsetLeft=function(a,b){var c=b;do isNaN(a.offsetLeft)||(c+=a.offsetLeft);while(a=a.offsetParent);return c},nv.tooltip.calcTooltipPosition=function(a,b,c,d){var e,f,g=parseInt(d.offsetHeight),h=parseInt(d.offsetWidth),i=nv.utils.windowSize().width,j=nv.utils.windowSize().height,k=window.pageYOffset,l=window.pageXOffset;j=window.innerWidth>=document.body.scrollWidth?j:j-16,i=window.innerHeight>=document.body.scrollHeight?i:i-16,b=b||"s",c=c||20;var m=function(a){return nv.tooltip.findTotalOffsetTop(a,f)},n=function(a){return nv.tooltip.findTotalOffsetLeft(a,e)};switch(b){case"e":e=a[0]-h-c,f=a[1]-g/2;var o=n(d),p=m(d);l>o&&(e=a[0]+c>l?a[0]+c:l-o+e),k>p&&(f=k-p+f),p+g>k+j&&(f=k+j-p+f-g);break;case"w":e=a[0]+c,f=a[1]-g/2;var o=n(d),p=m(d);o+h>i&&(e=a[0]-h-c),k>p&&(f=k+5),p+g>k+j&&(f=k+j-p+f-g);break;case"n":e=a[0]-h/2-5,f=a[1]+c;var o=n(d),p=m(d);l>o&&(e=l+5),o+h>i&&(e=e-h/2+5),p+g>k+j&&(f=k+j-p+f-g);break;case"s":e=a[0]-h/2,f=a[1]-g-c;var o=n(d),p=m(d);l>o&&(e=l+5),o+h>i&&(e=e-h/2+5),k>p&&(f=k);break;case"none":e=a[0],f=a[1]-c;var o=n(d),p=m(d)}return d.style.left=e+"px",d.style.top=f+"px",d.style.opacity=1,d.style.position="absolute",d},nv.tooltip.cleanup=function(){for(var a=document.getElementsByClassName("nvtooltip"),b=[];a.length;)b.push(a[0]),a[0].style.transitionDelay="0 !important",a[0].style.opacity=0,a[0].className="nvtooltip-pending-removal";setTimeout(function(){for(;b.length;){var a=b.pop();a.parentNode.removeChild(a)}},500)}}(),nv.utils.windowSize=function(){var a={width:640,height:480};return document.body&&document.body.offsetWidth&&(a.width=document.body.offsetWidth,a.height=document.body.offsetHeight),"CSS1Compat"==document.compatMode&&document.documentElement&&document.documentElement.offsetWidth&&(a.width=document.documentElement.offsetWidth,a.height=document.documentElement.offsetHeight),window.innerWidth&&window.innerHeight&&(a.width=window.innerWidth,a.height=window.innerHeight),a},nv.utils.windowResize=function(a){if(void 0!==a){var b=window.onresize;window.onresize=function(c){"function"==typeof b&&b(c),a(c)}}},nv.utils.getColor=function(a){return arguments.length?"[object Array]"===Object.prototype.toString.call(a)?function(b,c){return b.color||a[c%a.length]}:a:nv.utils.defaultColor()},nv.utils.defaultColor=function(){var a=d3.scale.category20().range();return function(b,c){return b.color||a[c%a.length]}},nv.utils.customTheme=function(a,b,c){b=b||function(a){return a.key},c=c||d3.scale.category20().range();var d=c.length;return function(e){var f=b(e);return d||(d=c.length),"undefined"!=typeof a[f]?"function"==typeof a[f]?a[f]():a[f]:c[--d]}},nv.utils.pjax=function(a,b){function c(c){d3.html(c,function(c){var d=d3.select(b).node();d.parentNode.replaceChild(d3.select(c).select(b).node(),d),nv.utils.pjax(a,b)})}d3.selectAll(a).on("click",function(){history.pushState(this.href,this.textContent,this.href),c(this.href),d3.event.preventDefault()}),d3.select(window).on("popstate",function(){d3.event.state&&c(d3.event.state)})},nv.utils.calcApproxTextWidth=function(a){if("function"==typeof a.style&&"function"==typeof a.text){var b=parseInt(a.style("font-size").replace("px","")),c=a.text().length;return c*b*.5}return 0},nv.utils.NaNtoZero=function(a){return"number"!=typeof a||isNaN(a)||null===a||1/0===a?0:a},nv.utils.optionsFunc=function(a){return a&&d3.map(a).forEach(function(a,b){"function"==typeof this[a]&&this[a](b)}.bind(this)),this};